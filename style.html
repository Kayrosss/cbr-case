<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
  <style>
    /* ===== –°–¢–ò–õ–ò –°–ö–†–û–õ–õ–ê –î–õ–Ø –ö–ê–ñ–î–û–ô –¢–ï–ú–´ ===== */
    html.theme-dark {
      scrollbar-width: thin;
      scrollbar-color: #ffd966 #1a3a5c;
    }

    html.theme-dark::-webkit-scrollbar {
      width: 12px;
    }

    html.theme-dark::-webkit-scrollbar-track {
      background: #1a3a5c;
      border-radius: 10px;
    }

    html.theme-dark::-webkit-scrollbar-thumb {
      background: #ffd966;
      border-radius: 10px;
      border: 2px solid #1a3a5c;
    }

    html.theme-dark::-webkit-scrollbar-thumb:hover {
      background: #ffaa33;
    }

    html.theme-light {
      scrollbar-width: thin;
      scrollbar-color: #0a1e32 #e1eaf1;
    }

    html.theme-light::-webkit-scrollbar-track {
      background: #e1eaf1;
    }

    html.theme-light::-webkit-scrollbar-thumb {
      background: #0a1e32;
      border: 2px solid #e1eaf1;
    }

    html.theme-business {
      scrollbar-width: thin;
      scrollbar-color: #d4b483 #1d3b2c;
    }

    html.theme-business::-webkit-scrollbar-track {
      background: #1d3b2c;
    }

    html.theme-business::-webkit-scrollbar-thumb {
      background: #d4b483;
      border: 2px solid #1d3b2c;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }

    /* ===== –¢–Å–ú–ù–ê–Ø –¢–ï–ú–ê (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ===== */
    body.theme-dark {
      background: linear-gradient(145deg, #0a2a3f, #1a4a6a);
      color: white;
    }

    body.theme-dark .container {
      background: rgba(10, 35, 55, 0.8);
      border-color: rgba(255,215,0,0.3);
    }

    body.theme-dark .style-card {
      background: rgba(255,255,255,0.05);
    }

    body.theme-dark .style-card:hover {
      background: rgba(255,255,255,0.1);
    }

    body.theme-dark .style-effects {
      background: rgba(0,0,0,0.3);
    }

    /* ===== –°–í–ï–¢–õ–ê–Ø –¢–ï–ú–ê ===== */
    body.theme-light {
      background: linear-gradient(145deg, #f0f5fa, #e1eaf1);
      color: #0a1e32;
    }

    body.theme-light .container {
      background: rgba(255, 255, 255, 0.9);
      border-color: #0a1e32;
    }

    body.theme-light .style-card {
      background: rgba(10, 30, 50, 0.05);
    }

    body.theme-light .style-card:hover {
      background: rgba(10, 30, 50, 0.1);
      border-color: #0a1e32;
    }

    body.theme-light .style-card.selected {
      background: rgba(255, 215, 0, 0.1);
      border-color: #0a1e32;
    }

    body.theme-light .style-name {
      color: #0a1e32;
    }

    body.theme-light .style-desc {
      color: #0a1e32;
    }

    body.theme-light .style-effects {
      background: rgba(0,0,0,0.05);
    }

    body.theme-light .effect-label {
      color: #0a1e32;
    }

    body.theme-light .back-link a {
      color: #0a1e32;
    }

    body.theme-light .start-btn {
      background: #b85c4a;
    }

    body.theme-light .start-btn:hover {
      background: #a04a3a;
    }

    /* –í–∞–ª—é—Ç—ã –≤ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ */
    body.theme-light .currency-symbol {
      color: rgba(10, 30, 50, 0.1);
    }

    /* ===== –î–ï–õ–û–í–ê–Ø –¢–ï–ú–ê (–∑–µ–ª—ë–Ω–∞—è) ===== */
    body.theme-business {
      background: linear-gradient(145deg, #1d3b2c, #2a5a3a);
      color: #f0ead2;
    }

    body.theme-business .container {
      background: rgba(45, 65, 50, 0.9);
      border-color: #d4b483;
    }

    body.theme-business .style-card {
      background: rgba(180, 180, 130, 0.1);
    }

    body.theme-business .style-card:hover {
      background: rgba(180, 180, 130, 0.2);
      border-color: #d4b483;
    }

    body.theme-business .style-card.selected {
      background: rgba(212, 180, 131, 0.15);
      border-color: #d4b483;
    }

    body.theme-business .style-name {
      color: #d4b483;
    }

    body.theme-business .style-desc {
      color: #f0ead2;
    }

    body.theme-business .style-effects {
      background: rgba(0,0,0,0.2);
    }

    body.theme-business .back-link a {
      color: #f0ead2;
    }

    /* –í–∞–ª—é—Ç—ã –≤ –¥–µ–ª–æ–≤–æ–π —Ç–µ–º–µ */
    body.theme-business .currency-symbol {
      color: rgba(210, 180, 140, 0.15);
    }

    /* –§–æ–Ω–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã */
    .currency-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .currency-symbol {
      position: absolute;
      font-size: 50px;
      color: rgba(255,255,255,0.03);
      animation: float 20s infinite;
    }

    @keyframes float {
      0%,100% { transform: translate(0,0); }
      50% { transform: translate(30px, -30px); }
    }

    /* ===== –ü–õ–ê–í–ê–Æ–©–ê–Ø –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø ===== */
    .floating-panel {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      z-index: 10000;
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(8px);
      padding: 10px 6px;
      border-radius: 40px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .panel-settings {
      background: none;
      border: 2px solid #ffd966;
      color: #ffd966;
      font-size: 20px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
      padding: 0;
    }

    .panel-settings:hover {
      background: #ffd96633;
      transform: scale(1.1);
    }

    .panel-divider {
      width: 24px;
      height: 1px;
      background: rgba(255, 215, 0, 0.3);
      margin: 2px 0;
    }

    .panel-themes {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .panel-themes .theme-option {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      padding: 4px;
      border-radius: 50%;
      transition: 0.2s;
      opacity: 0.6;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .panel-themes .theme-option:hover {
      opacity: 1;
      transform: scale(1.1);
    }

    .panel-themes .theme-option.active {
      opacity: 1;
      background: rgba(255, 215, 0, 0.15);
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
    }

    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏ –ø–æ–¥ —Ç–µ–º—ã */
    body.theme-light .floating-panel {
      background: rgba(255, 255, 255, 0.25);
    }

    body.theme-business .floating-panel {
      background: rgba(45, 65, 50, 0.25);
    }

    /* –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
    .settings-menu {
      position: fixed;
      background: rgba(10, 35, 55, 0.98);
      backdrop-filter: blur(10px);
      border: 2px solid #ffd966;
      border-radius: 30px;
      padding: 25px;
      z-index: 10000;
      min-width: 280px;
      display: none;
      box-shadow: 0 20px 40px -10px black;
    }

    .settings-menu.show {
      display: block;
    }

    .settings-menu h3 {
      color: #ffd966;
      margin-bottom: 20px;
      text-align: center;
      font-size: 22px;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      font-size: 18px;
    }

    .toggle {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255,255,255,0.2);
      border-radius: 30px;
      border: 2px solid #ffd966;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 2px;
      bottom: 2px;
      background-color: #ffd966;
      border-radius: 50%;
      transition: 0.2s;
    }

    input:checked + .slider {
      background-color: #4caf50;
    }

    input:checked + .slider:before {
      transform: translateX(30px);
    }

    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –º–µ–Ω—é –ø–æ–¥ —Ç–µ–º—ã */
    body.theme-dark .settings-menu {
      background: rgba(10, 35, 55, 0.98);
      border-color: #ffd966;
    }

    body.theme-dark .settings-menu label,
    body.theme-dark .settings-menu h3,
    body.theme-dark .settings-menu .setting-item span {
      color: white;
    }

    body.theme-light .settings-menu {
      background: rgba(240, 245, 250, 0.98);
      border-color: #0a1e32;
    }

    body.theme-light .settings-menu label,
    body.theme-light .settings-menu h3,
    body.theme-light .settings-menu .setting-item span {
      color: #0a1e32 !important;
    }

    body.theme-business .settings-menu {
      background: rgba(45, 65, 50, 0.98);
      border-color: #d4b483;
    }

    body.theme-business .settings-menu label,
    body.theme-business .settings-menu h3,
    body.theme-business .settings-menu .setting-item span {
      color: #f0ead2;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .container {
      position: relative;
      z-index: 10;
      max-width: 1200px;
      width: 100%;
      backdrop-filter: blur(12px);
      border-radius: 60px;
      padding: 50px;
      border: 2px solid;
      box-shadow: 0 30px 60px -20px black;
    }

    h1 {
      font-size: 48px;
      text-align: center;
      margin-bottom: 20px;
      color: #ffd966;
    }

    .subtitle {
      text-align: center;
      font-size: 22px;
      margin-bottom: 50px;
      opacity: 0.9;
    }

    .styles-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 30px;
      margin-bottom: 40px;
    }

    .style-card {
      border-radius: 40px;
      padding: 35px;
      border: 2px solid transparent;
      transition: 0.3s;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .style-card:hover {
      transform: translateY(-10px);
    }

    .style-card.selected {
      border-color: #ffd966;
      box-shadow: 0 0 30px rgba(255,215,0,0.2);
    }

    .style-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .style-name {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .style-desc {
      font-size: 18px;
      line-height: 1.5;
      margin-bottom: 25px;
      opacity: 0.9;
    }

    .style-effects {
      border-radius: 30px;
      padding: 20px;
    }

    .effect-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .effect-label {
      opacity: 0.8;
    }

    .effect-value {
      font-weight: bold;
    }

    .positive { color: #4caf50; }
    .negative { color: #ff6b4a; }

    .start-btn {
      background: #ff6b4a;
      border: none;
      color: white;
      font-size: 32px;
      font-weight: bold;
      padding: 25px 70px;
      border-radius: 70px;
      cursor: pointer;
      transition: 0.3s;
      width: fit-content;
      margin: 0 auto;
      display: block;
      border: 2px solid rgba(255,255,255,0.3);
    }

    .start-btn:hover {
      transform: scale(1.05);
      background: #ff8255;
    }

    .start-btn.disabled {
      opacity: 0.3;
      pointer-events: none;
    }

    .back-link {
      text-align: center;
      margin-top: 30px;
    }

    .back-link a {
      text-decoration: none;
      font-size: 18px;
    }

    .back-link a:hover {
      opacity: 1;
      text-decoration: underline;
    }

    @media (max-width: 900px) {
      .styles-grid {
        grid-template-columns: 1fr;
      }
      h1 { font-size: 36px; }
      .floating-panel {
        top: 10px;
        right: 10px;
        padding: 8px 5px;
      }
    }
  </style>
</head>
<body class="theme-dark">

<!-- –ê—É–¥–∏–æ -->
<audio id="bgMusic" loop preload="auto">
  <source src="assets/sounds/FonMelody.mp3" type="audio/mp3">
</audio>
<audio id="soundButton" preload="auto">
  <source src="assets/sounds/ButtonClick.mp3" type="audio/mp3">
</audio>
<audio id="soundBell" preload="auto">
  <source src="assets/sounds/TradingBell.mp3" type="audio/mp3">
</audio>

<!-- –§–æ–Ω -->
<div class="currency-bg" id="currencyBg"></div>

<!-- –ü–õ–ê–í–ê–Æ–©–ê–Ø –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
<div class="floating-panel">
  <button class="panel-settings" onclick="toggleSettings()">‚öôÔ∏è</button>
  <div class="panel-divider"></div>
  <div class="panel-themes">
    <button class="theme-option active" data-theme="dark" onclick="setTheme('dark')">üåô</button>
    <button class="theme-option" data-theme="light" onclick="setTheme('light')">‚òÄÔ∏è</button>
    <button class="theme-option" data-theme="business" onclick="setTheme('business')">üìä</button>
  </div>
</div>

<!-- –ú–ï–ù–Æ –ù–ê–°–¢–†–û–ï–ö -->
<div class="settings-menu" id="settingsMenu">
  <h3>‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</h3>
  <div class="setting-item">
    <span>üéµ –ú—É–∑—ã–∫–∞</span>
    <label class="toggle">
      <input type="checkbox" id="musicToggle" checked onchange="toggleMusic()">
      <span class="slider"></span>
    </label>
  </div>
  <div class="setting-item">
    <span>üîä –ó–≤—É–∫–∏</span>
    <label class="toggle">
      <input type="checkbox" id="soundToggle" checked onchange="toggleSound()">
      <span class="slider"></span>
    </label>
  </div>
  <div class="setting-item">
    <span>üîâ –ì—Ä–æ–º–∫–æ—Å—Ç—å</span>
    <input type="range" min="0" max="100" value="50" oninput="changeVolume(this.value)">
  </div>
</div>

<div class="container">
  <h1>üéØ –í–´–ë–ï–†–ò–¢–ï –°–¢–ò–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø</h1>
  <div class="subtitle">–û—Ç –≤–∞—à–µ–≥–æ —Å—Ç–∏–ª—è –∑–∞–≤–∏—Å–∏—Ç, –∫–∞–∫ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –∏ –±–∏–∑–Ω–µ—Å —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ —Ä–µ—à–µ–Ω–∏—è</div>

  <div class="styles-grid" id="stylesGrid"></div>

  <button class="start-btn disabled" id="startBtn" onclick="startGame()">üëâ –ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>

  <div class="back-link">
    <a href="index.html">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–ø–∏—Å–∞–Ω–∏—é –º–∏—Ñ–∞</a>
  </div>
</div>

<script>
  // ===== –£–†–û–í–ù–ò –ì–†–û–ú–ö–û–°–¢–ò =====
  const soundLevels = {
    bgMusic: 0.15,
    button: 0.4,
    bell: 0.5,
    default: 0.5
  };

  let soundEnabled = true;
  let musicEnabled = true;
  let volume = 50;
  let audioInitialized = false;

  // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ
  document.body.addEventListener('click', function initAudio() {
    if (!audioInitialized) {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      ctx.resume();
      audioInitialized = true;
      if (musicEnabled) {
        const music = document.getElementById('bgMusic');
        music.volume = volume / 100 * soundLevels.bgMusic;
        music.play().catch(e => {});
      }
      document.body.removeEventListener('click', initAudio);
    }
  }, { once: true });

  function playSound(soundId, type = 'default') {
    if (!soundEnabled) return;
    const sound = document.getElementById(soundId);
    if (sound) {
      sound.currentTime = 0;
      const level = soundLevels[type] || soundLevels.default;
      sound.volume = volume / 100 * level;
      sound.play().catch(e => {});
    }
  }

  // ===== –ú–ï–ù–Æ –ù–ê–°–¢–†–û–ï–ö =====
  function toggleSettings() {
    const menu = document.getElementById('settingsMenu');
    const btn = document.querySelector('.panel-settings');
    
    if (menu.classList.contains('show')) {
      menu.classList.remove('show');
      return;
    }
    
    const btnRect = btn.getBoundingClientRect();
    
    menu.style.top = (btnRect.bottom + 5) + 'px';
    menu.style.left = (btnRect.right - 280) + 'px';
    
    menu.classList.add('show');
    playSound('soundButton', 'button');
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
  document.addEventListener('click', function(e) {
    const menu = document.getElementById('settingsMenu');
    const btn = document.querySelector('.panel-settings');
    if (!btn.contains(e.target) && !menu.contains(e.target) && menu.classList.contains('show')) {
      menu.classList.remove('show');
    }
  });

  // ===== –ó–ê–ö–†–´–í–ê–¢–¨ –ú–ï–ù–Æ –ü–†–ò –°–ö–†–û–õ–õ–ï =====
  window.addEventListener('scroll', function() {
    const menu = document.getElementById('settingsMenu');
    if (menu.classList.contains('show')) {
      menu.classList.remove('show');
    }
  });

  // ===== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ó–í–£–ö–û–ú =====
  function toggleMusic() {
    musicEnabled = document.getElementById('musicToggle').checked;
    const music = document.getElementById('bgMusic');
    if (musicEnabled) {
      music.volume = volume / 100 * soundLevels.bgMusic;
      music.play().catch(e => {});
    } else {
      music.pause();
    }
    playSound('soundButton', 'button');
  }

  function toggleSound() {
    soundEnabled = document.getElementById('soundToggle').checked;
    playSound('soundButton', 'button');
  }

  function changeVolume(val) {
    volume = val;
    const music = document.getElementById('bgMusic');
    if (musicEnabled) {
      music.volume = volume / 100 * soundLevels.bgMusic;
    }
  }

  // ===== –¢–ï–ú–´ =====
  function setTheme(theme) {
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ body
    document.body.classList.remove('theme-dark', 'theme-light', 'theme-business');
    document.body.classList.add(`theme-${theme}`);
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ html (–¥–ª—è —Å–∫—Ä–æ–ª–ª–∞)
    document.documentElement.classList.remove('theme-dark', 'theme-light', 'theme-business');
    document.documentElement.classList.add(`theme-${theme}`);
    
    localStorage.setItem('theme', theme);
    playSound('soundButton', 'button');
    
    document.querySelectorAll('.theme-option').forEach(btn => {
      btn.classList.remove('active');
      if (btn.dataset.theme === theme) {
        btn.classList.add('active');
      }
    });
  }

  // ===== –°–¢–ò–õ–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø =====
  const leadershipStyles = [
    {
      id: 'conservative',
      name: '–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–æ—Ä',
      icon: 'üõ°Ô∏è',
      description: '–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –≤—ã—Å–æ–∫–æ–µ –¥–æ–≤–µ—Ä–∏–µ, –Ω–æ –±–∏–∑–Ω–µ—Å —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ',
      trustBonus: 15,
      businessModifier: 0.7,
      inflationResistance: 10,
      color: '#36a2eb'
    },
    {
      id: 'reformer',
      name: '–†–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä',
      icon: '‚ö°',
      description: '–†–∏—Å–∫–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è, –±–∏–∑–Ω–µ—Å —Ä–∞—Å—Ç—ë—Ç –±—ã—Å—Ç—Ä–æ, –Ω–æ –¥–æ–≤–µ—Ä–∏–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ',
      trustBonus: -10,
      businessModifier: 1.4,
      inflationResistance: -5,
      color: '#ff6b4a'
    },
    {
      id: 'populist',
      name: '–ù–∞—Ä–æ–¥–Ω—ã–π –ª–∏–¥–µ—Ä',
      icon: '‚ù§Ô∏è',
      description: '–í–∞—Å –ª—é–±—è—Ç, –¥–æ–≤–µ—Ä–∏–µ –≤—ã—Å–æ–∫–æ–µ, –Ω–æ —ç–∫–æ–Ω–æ–º–∏–∫–∞ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –ø–æ–ø—É–ª–∏–∑–º–∞',
      trustBonus: 20,
      businessModifier: 0.5,
      inflationResistance: -10,
      color: '#4caf50'
    },
    {
      id: 'technocrat',
      name: '–¢–µ—Ö–Ω–æ–∫—Ä–∞—Ç',
      icon: '‚öôÔ∏è',
      description: '–†–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –±–∞–ª–∞–Ω—Å –¥–æ–≤–µ—Ä–∏—è –∏ –±–∏–∑–Ω–µ—Å–∞',
      trustBonus: 5,
      businessModifier: 1.0,
      inflationResistance: 5,
      color: '#ffd966'
    }
  ];

  let selectedStyle = null;

  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
  function renderStyles() {
    const grid = document.getElementById('stylesGrid');
    grid.innerHTML = '';

    leadershipStyles.forEach(style => {
      const card = document.createElement('div');
      card.className = 'style-card';
      card.onclick = () => {
        playSound('soundButton', 'button');
        selectStyle(style.id);
      };

      card.innerHTML = `
        <div class="style-icon">${style.icon}</div>
        <div class="style-name" style="color: ${style.color}">${style.name}</div>
        <div class="style-desc">${style.description}</div>
        <div class="style-effects">
          <div class="effect-item">
            <span class="effect-label">‚≠ê –î–æ–≤–µ—Ä–∏–µ –≥—Ä–∞–∂–¥–∞–Ω:</span>
            <span class="effect-value ${style.trustBonus >= 0 ? 'positive' : 'negative'}">
              ${style.trustBonus >= 0 ? '+' : ''}${style.trustBonus}%
            </span>
          </div>
          <div class="effect-item">
            <span class="effect-label">üìà –†–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞:</span>
            <span class="effect-value ${style.businessModifier >= 1 ? 'positive' : 'negative'}">
              x${style.businessModifier}
            </span>
          </div>
          <div class="effect-item">
            <span class="effect-label">üõ°Ô∏è –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∏–Ω—Ñ–ª—è—Ü–∏–∏:</span>
            <span class="effect-value ${style.inflationResistance >= 0 ? 'positive' : 'negative'}">
              ${style.inflationResistance >= 0 ? '+' : ''}${style.inflationResistance}%
            </span>
          </div>
        </div>
      `;

      grid.appendChild(card);
    });
  }

  // –í—ã–±–æ—Ä —Å—Ç–∏–ª—è
  function selectStyle(styleId) {
    selectedStyle = styleId;
    
    document.querySelectorAll('.style-card').forEach((card, index) => {
      if (leadershipStyles[index].id === styleId) {
        card.classList.add('selected');
      } else {
        card.classList.remove('selected');
      }
    });

    const startBtn = document.getElementById('startBtn');
    startBtn.classList.remove('disabled');
  }

  // –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
  function startGame() {
    if (!selectedStyle) return;
    
    playSound('soundBell', 'bell');
    localStorage.setItem('leadershipStyle', selectedStyle);
    window.location.href = 'scenario.html';
  }

  // –§–æ–Ω–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã
  function createBg() {
    const bg = document.getElementById('currencyBg');
    const symbols = ['‚ÇΩ', '$', '‚Ç¨', '¬£', '¬•'];
    for (let i = 0; i < 40; i++) {
      const el = document.createElement('div');
      el.className = 'currency-symbol';
      el.textContent = symbols[Math.floor(Math.random() * symbols.length)];
      el.style.left = Math.random() * 100 + '%';
      el.style.top = Math.random() * 100 + '%';
      el.style.fontSize = (30 + Math.random() * 70) + 'px';
      el.style.animationDelay = Math.random() * 10 + 's';
      bg.appendChild(el);
    }
  }

  // ===== –ó–ê–ì–†–£–ó–ö–ê =====
  window.onload = function() {
    createBg();
    renderStyles();
    const savedTheme = localStorage.getItem('theme') || 'dark';
    setTheme(savedTheme);
  };
</script>

</body>
</html>
